var ngds=ngds||{};ngds.state=ngds.state||(ngds.state={});Date.prototype.getISOString=function(a){hours=this.getUTCHours();mins=this.getUTCMinutes();secs=this.getUTCSeconds();if(a===-1){hours=0;mins=0;secs=0}else{if(a===1){hours=23;mins=59;secs=59}}function b(c){return c<10?"0"+c:c}return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(hours)+":"+b(mins)+":"+b(secs)+"Z"};(function(){$(document).ready(function(){$(".accordion").accordion({autoHeight:false,clearStyle:false,header:"> li > h3",heightStyle:"content",active:false,collapsible:true,navigation:true,icons:{header:"expandIcon",activeHeader:"collapseIcon"},beforeActivate:function(e,f){if(f.newHeader[0]){var c=f.newHeader;var b=c.next(".ui-accordion-content")}else{var c=f.oldHeader;var b=c.next(".ui-accordion-content")}var d=c.attr("aria-selected")=="true";c.toggleClass("ui-corner-all",d).toggleClass("accordion-header-active ui-state-active ui-corner-top",!d).attr("aria-selected",((!d).toString()));c.children(".ui-icon").toggleClass("expandIcon",d).toggleClass("collapseIcon",!d);b.toggleClass("accordion-content-active",!d);if(d){b.slideUp()}else{b.slideDown()}return false}});$(".expanded").parents().filter("li").children().filter("h3").click();$("#expander-image").click(function(){var b=$(".accordion").find("> li > h3");if($(this).attr("src")=="/assets/plus_grey.png"){b.each(function(c,d){if($(d).hasClass("ui-state-default")){$(d).click()}});$(this).attr("src","/assets/minus_grey.png");$(this).attr("title","Collapse All")}else{b.each(function(c,d){if($(d).hasClass("ui-state-active")){$(d).click()}});$(this).attr("src","/assets/plus_grey.png");$(this).attr("title","Expand All")}return false});previousElement=$(".pagination ul li a").filter(function(b){return $(this).text()==="«"})[0];if($(previousElement).length>0){var a=$(previousElement).html().replace("«",'<img src = "/assets/previous.png" class="previous"/>');$(previousElement).html(a)}nextElement=$(".pagination ul li a").filter(function(b){return $(this).text()==="»"})[0];if($(nextElement).length>0){var a=$(nextElement).html().replace("»",'<img src = "/assets/next.png" class="previous"/>');$(nextElement).html(a)}$("#save_search").click(function(){var b=window.location.href;$("#dialog-form").dialog("open")});$("#dialog-form").dialog({autoOpen:false,height:185,width:300,modal:true,buttons:{"Save Search":function(){var b=window.location.href;ngds.state.search_name=$("#search_name").val();$.ajax({url:"/ngds/save_search",type:"POST",data:{url:b,search_name:$("#search_name").val()},success:function(e){$("#dialog-form").dialog("close");var c=$("<li/>",{});var d=$("<a/>",{text:ngds.state.search_name,href:window.location.href});c.append(d);$("#search_name").val("");$("ul#saved-list").append(c);$("ul#saved-list").menu("refresh")}})},Cancel:function(){$(this).dialog("close")}}});menu=$("ul#saved-list").menu().hide();$("#saved_searches_list_button").click(function(){menu.show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){menu.hide()});return false});$("#field-order-by").change(function(){var f=window.location.href.split("?")[1];if(typeof f==="undefined"){$("#hide-button").click()}var e=f.split("&");var b=[];for(var d=0;d<e.length;d++){if(e[d].indexOf("sort=")===-1){b.push(e[d])}}b.push("sort="+$("#field-order-by").val());var c=b.join("&");window.location.href=window.location.href.split("?")[0]+"?"+c});$(".facet").change(function(){window.location.href=$(this).val()});$("#filter-pub-date").click(function(){from_date=$("#from-date").val();to_date=$("#to-date").val();console.log("Entered Here...");console.log(from_date);console.log(to_date);if(from_date===""&&to_date===""){return false}var f=window.location.href.split("?")[1];console.log(f);var b=[];if(typeof f==="undefined"){}else{var e=f.split("&");for(var d=0;d<e.length;d++){if(e[d].indexOf("publication_date=")===-1){b.push(e[d])}}}date_range="[";if(from_date===""){date_range+=" * TO "}else{from_str=(new Date(from_date)).getISOString(-1);date_range+=from_str+" TO "}if(to_date===""){date_range+=" * ]"}else{to_str=(new Date(to_date)).getISOString(1);date_range+=to_str+" ]"}b.push("publication_date="+date_range);var c=b.join("&");console.log(c);window.location.href=window.location.href.split("?")[0]+"?"+c});$("#from-date").datepicker({defaultDate:"-1d",changeMonth:true,changeYear:true,yearRange:"c-100:c+50",numberOfMonths:1,onClose:function(b){$("#to-date").datepicker("option","minDate",b)}});$("#to-date").datepicker({defaultDate:"+1d",changeMonth:true,changeYear:true,yearRange:"c-100:c+50",numberOfMonths:1,onClose:function(b){$("#from-date").datepicker("option","maxDate",b)}});$("#search-review[title]").tooltip()})})();