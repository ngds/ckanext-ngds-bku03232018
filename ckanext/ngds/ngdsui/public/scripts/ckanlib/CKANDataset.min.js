ngds.ckandataset=function(a){var b=this;this.dataset=a;(function(c){if(c===null||typeof c==="undefined"){throw"Passed in object was null or undefined."}})(a);_ckan_dataset={construct:function(){var g;$.each(a.extras,function(i,n){if(n.key==="spatial"){g=n.value}});var c=$.parseJSON(g);var l=a.notes;var f={tag:"div",children:[{tag:"p",attributes:{"class":"title"},children:[{tag:"a",attributes:{href:"/dataset/"+a.name,text:a.title,target:"_blank","class":"title"}}]},{tag:"p",attributes:{style:"margin-bottom:3px; margin-top:3px;",text:(function(){var i=ngds.util.get_n_chars(l,150);if(i!==""){return i}else{return"No description."}})(),"class":"description"}},{tag:"p",attributes:{text:"Dataset has "+a.num_resources+(function(i){if(i===1){return" resource"}else{return" resources"}})(a.num_resources),"class":"resources"}}]};var e={tag:"div",attributes:{"class":"resources"},children:[{tag:"span",attributes:{"class":"resources",text:(a.tags.length==1?"Keyword: ":"Keywords: ")}}]};f.children.push(e);var d=0;for(var h=0;h<a.tags.length;h++){if(d>5){break}var m=a.tags[h];var k=m.display_name;if(k.length>25){continue}e.children.push({tag:"span",attributes:{"class":"description",text:(d>0?", ":"")+k}});d++}if(d==0){e.children.push({tag:"span",attributes:{"class":"description",text:"None"}})}if(a.tags.length>d){e.children.push({tag:"span",attributes:{"class":"description",text:", ..."}})}var j=ngds.util.dom_element_constructor(f)[0].innerHTML;return{getGeoJSON:function(){return c},map:{getPopupHTML:function(){return j}},get_feature_type:function(){return c}}}};return _ckan_dataset.construct()};