$(document).ready(function(){if($("#bbox-map").length<1){return}var e=new L.TileLayer("http://{s}.maptile.maps.svc.ovi.com/maptiler/v2/maptile/newest/normal.day/{z}/{x}/{y}/256/png8");map=new L.Map("bbox-map",{layers:[e],center:new L.LatLng(34.1618,-111.53332),zoom:5});L.Clear=L.Control.extend({options:{position:"topleft",title:"Clear Rectangle",forceSeparateButton:false},onAdd:function(h){var g=L.DomUtil.create("div","leaflet-control-rectangle-clear-container");this._createButton(this.options.title,"leaflet-control-rectangle-clear",g,this.clearRectangle,h);return g},_createButton:function(l,j,g,i,h){var k=L.DomUtil.create("a",j,g);k.href="#";k.title=l;L.DomEvent.addListener(k,"click",L.DomEvent.stopPropagation).addListener(k,"click",L.DomEvent.preventDefault).addListener(k,"click",i,h);return k},clearRectangle:function(){try{if(map.hasLayer(map.originalExtent)){map.removeLayer(map.originalExtent)}}catch(g){console.log("No original dataset extent layer.  Error: "+g)}}});var c=new L.Control.Draw({position:"topright",polyline:false,circle:false,polygon:false,marker:false});map.addControl(c);var d=new L.LayerGroup();var f=new L.Clear({position:"topright"});map.addControl(f);map.on("draw:rectangle-created",function(g){d.clearLayers();d.addLayer(g.rect);geojson=a("Polygon",g.rect._latlngs);b(geojson)});map.addLayer(d);function a(g,k){var j=[];if(g==="Point"){j=[k.lng,k.lat]}else{j.push([]);for(var h=0;h<k.length;h++){j[0].push([k[h].lng,k[h].lat])}}return JSON.stringify({type:g,coordinates:j})}function b(g){$("#field-extras-10-value").val(g)}});